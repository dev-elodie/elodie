lex -> parse -> rewrite -> type annotation